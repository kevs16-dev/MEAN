"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[242],{9242:(g,c,r)=>{r.d(c,{NotificationFormComponent:()=>E});var l=r(375),m=r(9769),o=r(4341),u=r(9864),f=r(6502),_=r(3413),t=r(5547);function p(e,a){if(1&e&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.Y8G("value",i.value),t.R7$(),t.SpI(" ",i.label," ")}}function d(e,a){if(1&e&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&e){const i=a.$implicit;t.Y8G("value",i),t.R7$(),t.SpI(" ",i," ")}}function v(e,a){if(1&e&&(t.j41(0,"div",18),t.EFF(1),t.k0s()),2&e){const i=t.XpG();t.R7$(),t.SpI(" ",i.serverError," ")}}let E=(()=>{class e{constructor(){this.fb=(0,l.WQX)(o.ok),this.notificationService=(0,l.WQX)(f.J),this.router=(0,l.WQX)(u.Ix),this.notificationForm=this.fb.group({role:[[],o.k0.required],title:["",[o.k0.maxLength(255)]],message:["",o.k0.required],type:["INFO",o.k0.required]}),this.roles=[{label:"Admin",value:"ADMIN"},{label:"Boutique",value:"BOUTIQUE"},{label:"Client",value:"CLIENT"},{label:"Tous",value:"ALL"}],this.types=["INFO","SUCCESS","WARNING","ALERT","ERROR"],this.isSubmitting=!1,this.serverError=null}onSubmit(){this.notificationForm.invalid||this.isSubmitting?this.notificationForm.markAllAsTouched():(this.isSubmitting=!0,this.serverError=null,this.notificationService.createForRole(this.notificationForm.value).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigate(["/admin/home"])},error:s=>{this.isSubmitting=!1,this.serverError=s?.error?.message||"Une erreur est survenue lors de l\u2019envoi de la notification."}}))}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-notification-form"]],decls:30,vars:7,consts:[[1,"row"],[1,"col-sm-12"],["cardTitle","Envoyer une notification"],[1,"row","g-3",3,"ngSubmit","formGroup"],[1,"col-md-6"],[1,"form-label"],["formControlName","role","multiple","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"text-muted"],["formControlName","type",1,"form-select"],[1,"col-12"],["type","text","formControlName","title","placeholder","Titre de la notification",1,"form-control"],["rows","4","formControlName","message","placeholder","Contenu de la notification",1,"form-control"],["class","col-12 text-danger",4,"ngIf"],[1,"col-12","d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"col-12","text-danger"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"app-card",2)(3,"form",3),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(4,"div",4)(5,"label",5),t.EFF(6,"R\xf4les *"),t.k0s(),t.j41(7,"select",6),t.DNE(8,p,2,2,"option",7),t.k0s(),t.j41(9,"small",8),t.EFF(10," Maintenez Ctrl (ou Cmd) pour s\xe9lectionner plusieurs r\xf4les "),t.k0s()(),t.j41(11,"div",4)(12,"label",5),t.EFF(13,"Type *"),t.k0s(),t.j41(14,"select",9),t.DNE(15,d,2,2,"option",7),t.k0s()(),t.j41(16,"div",10)(17,"label",5),t.EFF(18,"Titre"),t.k0s(),t.nrm(19,"input",11),t.k0s(),t.j41(20,"div",10)(21,"label",5),t.EFF(22,"Message *"),t.k0s(),t.nrm(23,"textarea",12),t.k0s(),t.DNE(24,v,2,1,"div",13),t.j41(25,"div",14)(26,"button",15),t.bIt("click",function(){return n.router.navigate(["/admin/home"])}),t.EFF(27," Annuler "),t.k0s(),t.j41(28,"button",16),t.EFF(29),t.k0s()()()()()()),2&s&&(t.R7$(3),t.Y8G("formGroup",n.notificationForm),t.R7$(5),t.Y8G("ngForOf",n.roles),t.R7$(7),t.Y8G("ngForOf",n.types),t.R7$(9),t.Y8G("ngIf",n.serverError),t.R7$(2),t.Y8G("disabled",n.isSubmitting),t.R7$(2),t.Y8G("disabled",n.isSubmitting),t.R7$(),t.SpI(" ",n.isSubmitting?"Envoi...":"Envoyer la notification"," "))},dependencies:[m.MD,m.Sq,m.bT,o.X1,o.qT,o.xH,o.y7,o.me,o.wz,o.W0,o.BC,o.cb,o.j4,o.JD,_.i],styles:[".row[_ngcontent-%COMP%]{margin-top:1rem}form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500}textarea[_ngcontent-%COMP%]{resize:vertical}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:.5rem}"]})}}return e})()}}]);