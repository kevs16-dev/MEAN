"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[655],{7655:(S,p,c)=>{c.d(p,{ShopsBrowseComponent:()=>F});var g=c(375),d=c(9769),l=c(4341),m=c(2136),_=c(9049),h=c(9097),e=c(5547),f=c(8955);function u(n,i){if(1&n&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t._id),e.R7$(),e.SpI(" ",t.name," ")}}function C(n,i){1&n&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"span",27),e.EFF(4,"Chargement..."),e.k0s()(),e.j41(5,"p",28),e.EFF(6,"Chargement des boutiques..."),e.k0s()()())}function M(n,i){if(1&n&&(e.j41(0,"div",24)(1,"div",29),e.nrm(2,"i",30),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.error," ")}}function v(n,i){1&n&&(e.j41(0,"div",34)(1,"div",35),e.nrm(2,"i",36),e.k0s(),e.j41(3,"h3"),e.EFF(4,"Aucune boutique trouv\xe9e"),e.k0s(),e.j41(5,"p",37),e.EFF(6,"Essayez de modifier vos crit\xe8res de recherche"),e.k0s()())}function O(n,i){if(1&n&&(e.j41(0,"div",55),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit,o=e.XpG(3);e.R7$(),e.SpI(" ",o.getCategoryName(t)," ")}}function P(n,i){if(1&n&&(e.j41(0,"p",56),e.EFF(1),e.nI1(2,"slice"),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.description.length>100?e.brH(2,1,t.description,0,100)+"...":t.description," ")}}function b(n,i){if(1&n&&(e.j41(0,"div",49),e.nrm(1,"i",57),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.contact.phone)}}function y(n,i){if(1&n&&(e.j41(0,"div",49),e.nrm(1,"i",58),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.openingHours.monday)}}function E(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"div",42)(3,"img",43),e.bIt("error",function(r){return g.eBV(t),g.Njj(r.target.src="assets/images/shop-placeholder.jpg")}),e.k0s(),e.DNE(4,O,2,1,"div",44),e.k0s(),e.j41(5,"div",45)(6,"h3",46),e.EFF(7),e.k0s(),e.DNE(8,P,3,5,"p",47),e.j41(9,"div",48)(10,"div",49),e.nrm(11,"i",50),e.j41(12,"span"),e.EFF(13),e.k0s()(),e.DNE(14,b,4,1,"div",51)(15,y,4,1,"div",51),e.k0s()(),e.j41(16,"div",52)(17,"button",53),e.nrm(18,"i",54),e.EFF(19," Voir les d\xe9tails "),e.k0s()()()()}if(2&n){const t=i.$implicit,o=e.XpG(3);e.R7$(3),e.Y8G("src",o.getShopImage(t),e.B4B)("alt",t.name),e.R7$(),e.Y8G("ngIf",t.category),e.R7$(3),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.description),e.R7$(5),e.JRh(o.getLocationString(t)),e.R7$(),e.Y8G("ngIf",null==t.contact?null:t.contact.phone),e.R7$(),e.Y8G("ngIf",null==t.openingHours?null:t.openingHours.monday)}}function x(n,i){if(1&n&&(e.j41(0,"div",38),e.DNE(1,E,20,8,"div",39),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.filteredShops)}}function I(n,i){if(1&n&&(e.j41(0,"div",31)(1,"div",2),e.DNE(2,v,7,0,"div",32)(3,x,2,1,"div",33),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",0===t.filteredShops.length),e.R7$(),e.Y8G("ngIf",t.filteredShops.length>0)}}let F=(()=>{class n{constructor(){this.shopService=(0,g.WQX)(_.s),this.categoryService=(0,g.WQX)(h.M),this.shops=[],this.filteredShops=[],this.categories=[],this.isLoading=!0,this.error=null,this.selectedCategory="all",this.searchTerm=""}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.loadCategories(),this.loadShops()},0)}loadShops(){this.isLoading=!0,this.shopService.getShops().subscribe({next:t=>{const o=t,a=(Array.isArray(o)?o:Array.isArray(o?.shops)?o.shops:Array.isArray(o?.data)?o.data:[]).filter(s=>"ACTIVE"===s.status);setTimeout(()=>{this.shops=a,this.applyFilters(),this.isLoading=!1},0)},error:()=>{setTimeout(()=>{this.error="Impossible de charger les boutiques.",this.isLoading=!1},0)}})}loadCategories(){this.categoryService.getCategories().subscribe({next:t=>{const o=t,r=Array.isArray(o)?o:Array.isArray(o?.categories)?o.categories:Array.isArray(o?.data)?o.data:[];this.categories=r.filter(a=>"ACTIVE"===a.status)},error:()=>{}})}onCategoryChange(){setTimeout(()=>this.applyFilters(),0)}onSearch(){setTimeout(()=>this.applyFilters(),0)}applyFilters(){let t=[...this.shops];if("all"!==this.selectedCategory&&(t=t.filter(o=>("object"==typeof o.category?o.category?._id:o.category)===this.selectedCategory)),this.searchTerm.trim()){const o=this.searchTerm.toLowerCase().trim();t=t.filter(r=>[r?.name,r?.slug,r?.description,r?.category?.name,r?.location?.floor,r?.location?.block].some(s=>s&&s.toString().toLowerCase().includes(o)))}this.filteredShops=t}getCategoryName(t){return"object"==typeof t.category&&t.category?.name?t.category.name:this.categories.find(r=>r._id===t.category)?.name||"Non cat\xe9goris\xe9"}getShopImage(t){return t?.coverImage||t?.logo||"assets/images/shop-placeholder.jpg"}getLocationString(t){const o=[];return t?.location?.floor&&o.push(`\xc9tage ${t.location.floor}`),t?.location?.block&&o.push(`Bloc ${t.location.block}`),o.length>0?o.join(" \u2022 "):"Centre commercial"}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-shops-browse"]],decls:33,vars:8,consts:[[1,"shops-browse-container"],[1,"hero-section"],[1,"container-fluid","px-4"],[1,"hero-title"],[1,"hero-subtitle"],[1,"filters-section"],[1,"row","g-3","align-items-end"],[1,"col-md-6"],[1,"form-label","fw-semibold"],[1,"input-group"],[1,"input-group-text"],["antIcon","","type","search","theme","outline"],["type","text","placeholder","Nom, cat\xe9gorie, \xe9tage...",1,"form-control","form-control-lg",3,"ngModelChange","input","ngModel"],[1,"col-md-4"],[1,"form-select","form-select-lg",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"results-count"],[1,"count-number"],[1,"count-label"],["class","container-fluid px-4 py-5",4,"ngIf"],["class","shops-grid-section",4,"ngIf"],[3,"value"],[1,"container-fluid","px-4","py-5"],[1,"text-center"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3","text-muted"],["role","alert",1,"alert","alert-danger"],["antIcon","","type","exclamation-circle","theme","outline",1,"me-2"],[1,"shops-grid-section"],["class","empty-state",4,"ngIf"],["class","row g-4",4,"ngIf"],[1,"empty-state"],[1,"empty-state-icon"],["antIcon","","type","shop","theme","outline"],[1,"text-muted"],[1,"row","g-4"],["class","col-xl-3 col-lg-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-xl-3","col-lg-4","col-md-6"],[1,"shop-card"],[1,"shop-card-image"],[3,"error","src","alt"],["class","shop-card-badge",4,"ngIf"],[1,"shop-card-body"],[1,"shop-card-title"],["class","shop-card-description",4,"ngIf"],[1,"shop-card-info"],[1,"info-item"],["antIcon","","type","environment","theme","outline"],["class","info-item",4,"ngIf"],[1,"shop-card-footer"],[1,"btn","btn-primary","btn-sm","w-100"],["antIcon","","type","eye","theme","outline",1,"me-1"],[1,"shop-card-badge"],[1,"shop-card-description"],["antIcon","","type","phone","theme","outline"],["antIcon","","type","clock-circle","theme","outline"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.EFF(4,"D\xe9couvrez nos boutiques"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"Explorez notre centre commercial et trouvez vos magasins pr\xe9f\xe9r\xe9s"),e.k0s()()(),e.j41(7,"div",5)(8,"div",2)(9,"div",6)(10,"div",7)(11,"label",8),e.EFF(12,"Rechercher une boutique"),e.k0s(),e.j41(13,"div",9)(14,"span",10),e.nrm(15,"i",11),e.k0s(),e.j41(16,"input",12),e.mxI("ngModelChange",function(s){return e.DH7(r.searchTerm,s)||(r.searchTerm=s),s}),e.bIt("input",function(){return r.onSearch()}),e.k0s()()(),e.j41(17,"div",13)(18,"label",8),e.EFF(19,"Cat\xe9gorie"),e.k0s(),e.j41(20,"select",14),e.mxI("ngModelChange",function(s){return e.DH7(r.selectedCategory,s)||(r.selectedCategory=s),s}),e.bIt("change",function(){return r.onCategoryChange()}),e.j41(21,"option",15),e.EFF(22,"Toutes les cat\xe9gories"),e.k0s(),e.DNE(23,u,2,2,"option",16),e.k0s()(),e.j41(24,"div",17)(25,"div",18)(26,"span",19),e.EFF(27),e.k0s(),e.j41(28,"span",20),e.EFF(29),e.k0s()()()()()(),e.DNE(30,C,7,0,"div",21)(31,M,4,1,"div",21)(32,I,4,2,"div",22),e.k0s()),2&o&&(e.R7$(16),e.R50("ngModel",r.searchTerm),e.R7$(4),e.R50("ngModel",r.selectedCategory),e.R7$(3),e.Y8G("ngForOf",r.categories),e.R7$(4),e.JRh(r.filteredShops.length),e.R7$(2),e.SpI("boutique",r.filteredShops.length>1?"s":""),e.R7$(),e.Y8G("ngIf",r.isLoading),e.R7$(),e.Y8G("ngIf",!r.isLoading&&r.error),e.R7$(),e.Y8G("ngIf",!r.isLoading&&!r.error))},dependencies:[d.MD,d.Sq,d.bT,l.YN,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,m.G,f.LJ,d.P9],styles:[".shops-browse-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(180deg,#f8f9fa,#fff)}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:4rem 0 3rem;margin-bottom:2rem}.hero-section[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;margin-bottom:.5rem;text-shadow:0 2px 4px rgba(0,0,0,.1)}.hero-section[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;opacity:.95;margin-bottom:0}.filters-section[_ngcontent-%COMP%]{background:#fff;padding:2rem 0;box-shadow:0 2px 8px #0000000d;margin-bottom:2rem;border-bottom:1px solid #e9ecef}.filters-section[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#495057;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px;margin-bottom:.5rem}.filters-section[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border-right:none;color:#6c757d}.filters-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border-left:none;border-color:#dee2e6}.filters-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .filters-section[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.filters-section[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{text-align:center;padding:.75rem;background:#f8f9fa;border-radius:.5rem}.filters-section[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]   .count-number[_ngcontent-%COMP%]{display:block;font-size:1.75rem;font-weight:700;color:#667eea;line-height:1}.filters-section[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]   .count-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6c757d;text-transform:uppercase;letter-spacing:.5px;margin-top:.25rem}.shop-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;overflow:hidden;box-shadow:0 2px 12px #00000014;transition:all .3s ease;height:100%;display:flex;flex-direction:column}.shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 8px 24px #0000001f}.shop-card[_ngcontent-%COMP%]   .shop-card-image[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;overflow:hidden;background:linear-gradient(135deg,#667eea,#764ba2)}.shop-card[_ngcontent-%COMP%]   .shop-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.shop-card[_ngcontent-%COMP%]   .shop-card-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.shop-card[_ngcontent-%COMP%]   .shop-card-image[_ngcontent-%COMP%]   .shop-card-badge[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:#fffffff2;color:#667eea;padding:.375rem .75rem;border-radius:2rem;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;backdrop-filter:blur(10px)}.shop-card[_ngcontent-%COMP%]   .shop-card-body[_ngcontent-%COMP%]{padding:1.5rem;flex-grow:1;display:flex;flex-direction:column}.shop-card[_ngcontent-%COMP%]   .shop-card-body[_ngcontent-%COMP%]   .shop-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#212529;margin-bottom:.75rem;line-height:1.3}.shop-card[_ngcontent-%COMP%]   .shop-card-body[_ngcontent-%COMP%]   .shop-card-description[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem;line-height:1.6;margin-bottom:1rem;flex-grow:1}.shop-card[_ngcontent-%COMP%]   .shop-card-body[_ngcontent-%COMP%]   .shop-card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:auto}.shop-card[_ngcontent-%COMP%]   .shop-card-body[_ngcontent-%COMP%]   .shop-card-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#495057;font-size:.875rem}.shop-card[_ngcontent-%COMP%]   .shop-card-body[_ngcontent-%COMP%]   .shop-card-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1rem}.shop-card[_ngcontent-%COMP%]   .shop-card-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e9ecef;background:#f8f9fa}.shop-card[_ngcontent-%COMP%]   .shop-card-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600;text-transform:uppercase;letter-spacing:.5px;font-size:.875rem;padding:.625rem 1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.empty-state[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:4rem;color:#dee2e6;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:.5rem}@media(max-width:768px){.hero-section[_ngcontent-%COMP%]{padding:2rem 0 1.5rem}.hero-section[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-section[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1rem}.filters-section[_ngcontent-%COMP%]{padding:1.5rem 0}.filters-section[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{margin-top:1rem}.shop-card[_ngcontent-%COMP%]   .shop-card-image[_ngcontent-%COMP%]{height:180px}}"]})}}return n})()}}]);